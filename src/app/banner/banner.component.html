<!--BEGIN LICENSE BLOCK--> 
<!--Interneuron Terminus

Copyright(C) 2025  Interneuron Limited

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.If not, see<http://www.gnu.org/licenses/>. -->
<!--END LICENSE BLOCK--> 
  <!-- <div class="patientBannerHolder" style="min-height: 102px; max-height: 102px;"> -->


    <div class="patientBannerHolder border rounded" *ngIf="showPatientBanner && !isStandAloneApplication">

      <div *ngIf="isLatestAndGreatest">

        <div class="" *ngIf="displayPort === 'Desktop'" >
          <div class="row">
            <div class="col-md-10">
              <!-- <app-main-demographics [value]="personId"  (getmainCarer)="getmainCarer($event)" (returnDemographicsResponse)="receiveBannerDemographicResponse($event)" (nhsVerifyEvent)="verifyNHS($event)">
              </app-main-demographics> -->
              <app-main-demographics [value]="personId"  (getmainCarer)="getmainCarer($event)" (returnDemographicsResponse)="receiveBannerDemographicResponse($event)">
              </app-main-demographics>
            </div>
            <div class="col-md-2">
              <app-banner-actions [value]="personId" [view]="'collapsed'" *ngIf="demographicsReturned">
              </app-banner-actions>
            </div>
          </div>

          <div class="row" style="margin-top: -12px;" *ngIf="demographicsReturned">
            <div class="col-md-10">
              <div class="row">
                <div class="col-md-3"></div>
                <div  *ngIf="mainCarer != ''" class="col-md-2">
                  <p style="line-height:1.2; margin-bottom: 0; ">
                    <span style="font-size: 0.85em;" *ngIf="env  != 'social_care'">Location </span> 
                    <!-- <span style="font-size: 0.85em;" *ngIf="env  == 'social_care'"> Address </span>  -->
                   <br/>
                   <strong><app-main-encounter [value]="personId" [view]="'collapsed'">
                  </app-main-encounter></strong> 
                </p>
                </div>
                <div  *ngIf="mainCarer == ''" class="col-md-4">
                  <p style="line-height:1.2; margin-bottom: 0; ">
                 <span style="font-size: 0.85em;" *ngIf="env  != 'social_care'">Location </span> 
                    <!-- <span style="font-size: 0.85em;" *ngIf="env  == 'social_care'"> Address </span>  -->
                   <br/>
                   <strong><app-main-encounter [value]="personId" [view]="'collapsed'">
                  </app-main-encounter></strong> 
                </p>
                </div>
                 <div  *ngIf="mainCarer != ''"  class="col-md-3">
                  <p style="line-height:1.2; ">
                 <!-- <span  style="font-size: 0.85em;"> Name of main/responsible carer </span> <br/> -->
                <strong>  <p  [innerHTML]="mainCarer"></p></strong>
                 </p>
                </div>
                <div class="col-md-2" *ngIf="env  != 'social_care'">
                  <app-main-warnings  [value]="personId">
                  </app-main-warnings>
                </div>
                <div class="col-md-2">
                  <app-main-allergies [value]="personId">
                  </app-main-allergies>
                </div>
                
              </div>
        
            </div>
            <div class="col-md-2" *ngIf="env  != 'social_care'">
              <app-main-badges [value]="personId">
              </app-main-badges>
            </div>
          </div>

          <div class="row"  *ngIf="!showPatientBanner && !unableToLoadPatient">
          <div class="col-md-6">
            <h3 class="text-secondary">Loading patient ....</h3>
          </div>
          </div>

          <div class="row"  *ngIf="unableToLoadPatient">
            <div class="col-md-12">
              <div class="alert alert-danger">
                <h3 >Unable to load selected patient</h3>
            <h5>Please select a different patient</h5>
              </div>
            </div>
          </div>
        </div>

        <div class="" *ngIf="displayPort === 'Tablet'" >
          <div class="row">
            <div class="col-md-10">
              <!-- <app-main-demographics [value]="personId" (returnDemographicsResponse)="receiveBannerDemographicResponse($event)" (nhsVerifyEvent)="verifyNHS($event)">
              </app-main-demographics> -->
              <app-main-demographics [value]="personId" (returnDemographicsResponse)="receiveBannerDemographicResponse($event)">
              </app-main-demographics>
            </div>
            <div class="col-md-2">
              <app-banner-actions [value]="personId" [view]="'collapsed'" *ngIf="demographicsReturned">
              </app-banner-actions>
            </div>
          </div>

          <div class="row" *ngIf="demographicsReturned">
            <div class="col-md-10">
              <div class="row">
                <div class="col-md-3">

                </div>
                <div *ngIf="mainCarer == ''" class="col-md-3">
                  <!-- <span style="font-size: 0.85em;" *ngIf="env  != 'social_care'">Location </span> 
                    <span style="font-size: 0.85em;" *ngIf="env  == 'social_care'"> Address </span> 
                   <br/> -->
                 <strong><app-main-encounter [value]="personId" [view]="'collapsed'">
                  </app-main-encounter></strong> 
                </div>
                <div *ngIf="mainCarer != ''" class="col-md-2">
                  <!-- <span style="font-size: 0.85em;" *ngIf="env  != 'social_care'">Location </span> 
                    <span style="font-size: 0.85em;" *ngIf="env  == 'social_care'"> Address </span>  -->
                   <!-- <br/> -->
                   <strong><app-main-encounter [value]="personId" [view]="'collapsed'">
                  </app-main-encounter></strong> 
                </div>
                <div *ngIf="mainCarer != ''" class="col-md-2">
                  <p style="line-height:1.2; font-size: 0.85em;">
                    <!-- <span >Responsible carer </span> <br/> -->
                 
                    <strong>  <p  [innerHTML]="mainCarer"></p></strong>
                  </p>
                 
                
                 </div>
                <div class="col-md-2" *ngIf="env  != 'social_care'">
                  <app-main-warnings  [value]="personId">></app-main-warnings>
                </div>
                <div class="col-md-2">
                  <app-main-allergies [value]="personId">
                  </app-main-allergies>
                </div>
              </div>
            </div>
            <div class="col-md-2" *ngIf="env  != 'social_care'">
              <app-main-badges [value]="personId">
              </app-main-badges>
            </div>
          </div>

        </div>

        <div class="" *ngIf="displayPort === 'Mobile'" style="padding-left: 12px;">

          <div class="row mb-3">
            <div class="col-10">
              <!-- <app-main-demographics [value]="personId" (returnDemographicsResponse)="receiveBannerDemographicResponse($event)" (nhsVerifyEvent)="verifyNHS($event)">
              </app-main-demographics> -->
              <app-main-demographics [value]="personId" (returnDemographicsResponse)="receiveBannerDemographicResponse($event)">
              </app-main-demographics>
            </div>
            <div class="col-2" style="text-align: right;">
              <app-banner-actions [value]="personId" [view]="'collapsed'" *ngIf="demographicsReturned">
              </app-banner-actions>
            </div>
          </div>
          <div class="row">
            <div class="col-9">
              <app-main-allergies [value]="personId">
              </app-main-allergies>
            </div>
            <div class="col-3" style="text-align: right;" *ngIf="env  != 'social_care'">
              <table style="float: right;">
                <tr>
                  <td>
                    <app-main-warnings [value]="personId">
                    </app-main-warnings>
                  </td>
                  <td>&nbsp;</td>
                  <td>
                    <app-main-badges [value]="personId">
                    </app-main-badges>
                  </td>
                </tr>
              </table>


            </div>
          </div>
        </div>

      </div>

      <div *ngIf="!isLatestAndGreatest">
        <div class="">
          <div class="row">
            <div class="col-md-9">
              <!-- <app-main-demographics [value]="personId" (returnDemographicsResponse)="receiveBannerDemographicResponse($event)" (nhsVerifyEvent)="verifyNHS($event)">
              </app-main-demographics> -->
              <app-main-demographics [value]="personId" (returnDemographicsResponse)="receiveBannerDemographicResponse($event)">
              </app-main-demographics>
            </div>
            <div class="col-md-3">
              <app-banner-actions [value]="personId" [view]="'collapsed'" *ngIf="demographicsReturned">
              </app-banner-actions>
            </div>
          </div>

          <div class="row" style="margin-top: -12px;" *ngIf="demographicsReturned">
            <div class="col-md-9">
              <div class="row">
                <div class="col-md-6">
                  <app-main-encounter [value]="personId" [view]="'collapsed'">
                  </app-main-encounter>
                </div>
                <div class="col-md-3">
                  <app-main-allergies [value]="personId">
                  </app-main-allergies>
                </div>
                <div class="col-md-3" *ngIf="env  != 'social_care'">
                  <app-main-warnings  [value]="personId">
                  </app-main-warnings>
                </div>
              </div>
            </div>
            <div class="col-md-3" *ngIf="env  != 'social_care'">
              <app-main-badges [value]="personId">
              </app-main-badges>
            </div>
          </div>

          <div class="row"  *ngIf="!showPatientBanner && !unableToLoadPatient">
          <div class="col-md-6">
            <h3 class="text-secondary">Loading patient ....</h3>
          </div>
          </div>

          <div class="row"  *ngIf="unableToLoadPatient">
            <div class="col-md-12">
              <div class="alert alert-danger">
                <h3 >Unable to load selected patient</h3>
            <h5>Please select a different patient</h5>
              </div>
            </div>
          </div>
        </div>
      </div>


<!-- Expanded Banner -->
<div class="panel-body">
  <div *ngIf="sharedData.showExpandedBanner" >
    <div style="color: #535e7e; padding:5px;" >

      <div class="row" *ngIf="displayPort === 'Mobile'">
          <div class="col-md-12">

          </div>
      </div>

      <div class="row" *ngIf="displayPort === 'Mobile'">
        <div class="col-sm-8">
          <app-main-encounter [value]="personId" [view]="'expanded'">
          </app-main-encounter>
        </div>
        <div class="col-sm-4">
          <app-banner-actions [value]="personId" [view]="'expanded'" *ngIf="demographicsReturned">
          </app-banner-actions>
        </div>



    </div>

    <div class="card" *ngIf="!isLatestAndGreatest" style="padding: 10px;">
      <strong>Allergies and Intolerances</strong>
      <app-main-allergies [value]="personId" [view]="'expanded'">
      </app-main-allergies>
    </div>

    <div class="card" *ngIf="!isLatestAndGreatest && env  != 'social_care'" style="padding: 10px;">
      <strong>Warnings</strong>
      <app-main-warnings [value]="personId" [view]="'expanded'">
      </app-main-warnings>
    </div>


      <app-extended-banner [value]="personId">
      </app-extended-banner>

    </div>
  </div>
</div>


      </div>

      <div class="{{nhsVerificationStatus==='error' ? 'alert alert-danger': 'alert alert-success'}}" role="alert" *ngIf="nhsVerificationMessage">
        {{nhsVerificationMessage}}
      </div>



      