<!--BEGIN LICENSE BLOCK--> 
<!--Interneuron Terminus

Copyright(C) 2025  Interneuron Limited

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.If not, see<http://www.gnu.org/licenses/>. -->
<!--END LICENSE BLOCK--> 
<div *ngIf="mainAllergies" style="font-size: 1em; color: #535e7e"  style="cursor: pointer;"
(click)="updateExpandbanner()" >


  <div *ngIf="selectedView === 'collapsed'" >
    <div class="" *ngIf="displayPort === 'Desktop' || displayPort === 'Tablet' || displayPort === 'Mobile'">
      <div
        class="dropdown"
        style="min-width: 100%; line-height: 1.2; color: #535e7e"
      >

      <div
      class="text-success"
      style="width: 100%; line-height: 1.2"
      *ngIf="mainAllergies.noknownallergies"
    >
      <strong>No Known Allergies</strong><br />
    </div>


      <div
      class="text-danger text-left text-wrap"
      style="width: 100%; line-height: 1.2; color: red"
      *ngIf="mainAllergies.unabletoacsertain"
    >
      <strong>Unable to ascertain allergy status (EMERGENCY USE ONLY)</strong
      ><br />
    </div>

      <div
      class=""
      style="width: 100%; line-height: 1.2; color: #535e7e"
      *ngIf="
        mainAllergies.noallergiesrecorded &&
        !mainAllergies.unabletoacsertain &&
        !mainAllergies.noknownallergies
      "
    >
      <strong>No allergies recorded</strong>
    </div>


    <div style="margin-bottom:5px;" *ngIf = "!isLatestAndGreatest">

      <!-- <span *ngIf="mainAllergies.lifethreateningcount > 0">
        <a href="#" class="badge badge-danger">
          <i
          class="fa fa-exclamation-triangle text-white"
          aria-hidden="true"
        ></i>
        </a>
      </span> -->

      <span *ngIf="totalAllergiesCount > 0">
        <span *ngIf="mainAllergies.lifethreateningcount > 0">
          <strong> <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i></strong>
        </span>
        <a href="#" class="badge" style="background-color:rgb(246, 242, 242); font-size : 1em; color:#535e7e">
          ALLERGIES : {{ totalAllergiesCount }}
        </a>
      </span>

      <!-- <span *ngIf="mainAllergies.adversereactioncount > 0">
        <a href="#" class="badge" style="background-color:rgb(246, 242, 242); font-size : 1em; color: rgb(15, 3, 3)">
          Adverse Drug Reactions : {{ mainAllergies.adversereactioncount }}
        </a>
      </span>

      <span *ngIf="mainAllergies.sensitivityintolerancecount > 0">
        <a href="#" class="badge" style="background-color:rgb(246, 242, 242); font-size : 1em; color: rgb(15, 3, 3)">
          Sensitivity / Intolerances :
          {{ mainAllergies.sensitivityintolerancecount }}
        </a>
      </span>

      <span *ngIf="mainAllergies.cautioncount > 0">
        <a href="#" class="badge" style="background-color:rgb(246, 242, 242); font-size : 1em; color: rgb(15, 3, 3)">
          Cautions : {{ mainAllergies.cautioncount }}
        </a>
      </span> -->

      </div>


        <div class="dropbtn" style="margin-bottom:5px;" *ngIf = "isLatestAndGreatest">

        <!-- <span *ngIf="mainAllergies.lifethreateningcount > 0">
          <a href="#" class="badge badge-danger">
            <i
            class="fa fa-exclamation-triangle text-white"
            aria-hidden="true"
          ></i>
          </a>
        </span> -->

        <span *ngIf="totalAllergiesCount > 0">
          <span *ngIf="mainAllergies.lifethreateningcount > 0">
            <strong> <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i></strong>
          </span>
            
          <a href="#" class="badge" style="background-color:rgb(246, 242, 242); font-size : 1em; color:#535e7e">
            ALLERGIES : {{ totalAllergiesCount }}
          </a>
        </span>

        <!-- <span *ngIf="mainAllergies.adversereactioncount > 0">
          <a href="#" class="badge" style="background-color:rgb(246, 242, 242); font-size : 1em; color: rgb(15, 3, 3)">
            Adverse Drug Reactions : {{ mainAllergies.adversereactioncount }}
          </a>
        </span>

        <span *ngIf="mainAllergies.sensitivityintolerancecount > 0">
          <a href="#" class="badge" style="background-color:rgb(246, 242, 242); font-size : 1em; color: rgb(15, 3, 3)">
            Sensitivity / Intolerances :
            {{ mainAllergies.sensitivityintolerancecount }}
          </a>
        </span>

        <span *ngIf="mainAllergies.cautioncount > 0">
          <a href="#" class="badge" style="background-color:rgb(246, 242, 242); font-size : 1em; color: rgb(15, 3, 3)">
            Cautions : {{ mainAllergies.cautioncount }}
          </a>
        </span> -->

        </div>

        <!-- <div class="dropdown-content float-left" style=" z-index: 5; line-height: 1.8;"
        *ngIf = "isLatestAndGreatest">

          <ul class="list-group" *ngIf="mainAllergies.allergycount > 0">
            <li class="list-group-item">
              <p class="h6" style="color: #535e7e;">
                Allergies  <span class="badge" style="background-color: #535e7e; color: white">{{ mainAllergies.allergycount }}</span>
              </p>
              <div [innerHTML]= 'mainAllergies.allergies'></div>
            </li>
          </ul>

          <ul class="list-group" *ngIf="mainAllergies.adversereactioncount > 0">
            <li class="list-group-item">
              <p class="h6" style="color: #535e7e;">
                Adverse Drug Reactions  <span class="badge" style="background-color: #535e7e; color: white">{{ mainAllergies.adversereactioncount }}</span>
              </p>
              <div [innerHTML]= 'mainAllergies.adversedrugreactions'></div>
            </li>
          </ul>

          <ul class="list-group" *ngIf="mainAllergies.sensitivityintolerancecount > 0">
            <li class="list-group-item">
              <p class="h6" style="color: #535e7e;">
                Sensitivity / Intolerances  <span class="badge" style="background-color: #535e7e; color: white">{{ mainAllergies.sensitivityintolerancecount }}</span>
              </p>
              <div [innerHTML]= 'mainAllergies.sensitityintolerances'></div>
            </li>
          </ul>

          <ul class="list-group" *ngIf="mainAllergies.cautioncount > 0">
            <li class="list-group-item">
              <p class="h6" style="color: #535e7e;">
                Cautions  <span class="badge" style="background-color: #535e7e; color: white">{{ mainAllergies.cautioncount }}</span>
              </p>
              <div [innerHTML]= 'mainAllergies.cautions'></div>
            </li>
          </ul>


          <ul class="list-group" >
            <li class="list-group-item">
            <button id="" type="button" class="btn btn-info text-white btn-sm btn-block"
              (click)="resolveModule()">
                Edit Allergies
              </button>
            </li>
          </ul>


      </div> -->


      </div>
    </div>
  </div>

<div *ngIf="selectedView === 'expanded'" >

  <ul class="list-group" *ngIf="mainAllergies.allergycount > 0">
    <li class="list-group-item">
      <p class="h6" style="color: #535e7e;">
        Allergies  <span class="badge" style="background-color: #535e7e; color: white">{{ mainAllergies.allergycount }}</span>
      </p>
      <div [innerHTML]= 'mainAllergies.allergies'></div>
    </li>
  </ul>

  <ul class="list-group" *ngIf="mainAllergies.adversereactioncount > 0">
    <li class="list-group-item">
      <p class="h6" style="color: #535e7e;">
        Adverse Drug Reactions  <span class="badge" style="background-color: #535e7e; color: white">{{ mainAllergies.adversereactioncount }}</span>
      </p>
      <div [innerHTML]= 'mainAllergies.adversedrugreactions'></div>
    </li>
  </ul>

  <ul class="list-group" *ngIf="mainAllergies.sensitivityintolerancecount > 0">
    <li class="list-group-item">
      <p class="h6" style="color: #535e7e;">
        Sensitivity / Intolerances  <span class="badge" style="background-color: #535e7e; color: white">{{ mainAllergies.sensitivityintolerancecount }}</span>
      </p>
      <div [innerHTML]= 'mainAllergies.sensitityintolerances'></div>
    </li>
  </ul>

  <ul class="list-group" *ngIf="mainAllergies.cautioncount > 0">
    <li class="list-group-item">
      <p class="h6" style="color: #535e7e;">
        Cautions  <span class="badge" style="background-color: #535e7e; color: white">{{ mainAllergies.cautioncount }}</span>
      </p>
      <div [innerHTML]= 'mainAllergies.cautions'></div>
    </li>
  </ul>


</div>

</div>
